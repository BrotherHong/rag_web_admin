# 系統設定功能文件

## 概述

完整的系統設定頁面，包含 7 個主要設定類別，提供管理員全方位的系統控制能力。

## 功能架構

```
系統設定
├── 🤖 AI 模型設定
├── 📚 知識庫設定
├── 🏷️ 分類管理
├── 👥 使用者管理
├── 🔔 通知設定
├── 💾 備份設定
└── 📊 系統資訊
```

---

## 1. 🤖 AI 模型設定

### 功能說明
調整 AI 模型的行為參數，優化回答品質和成本平衡。

### 設定項目

#### 模型選擇
- **GPT-4**：最佳品質，適合複雜問題
- **GPT-4 Turbo**：快速回應，平衡品質
- **GPT-3.5 Turbo**：經濟實惠，基本問答
- **Claude 3**：替代方案

#### 溫度參數 (Temperature)
- **範圍**：0 - 1
- **預設值**：0.7
- **說明**：
  - 0：保守、一致性高
  - 1：創意、多樣性高
- **建議**：
  - 規章制度查詢：0.3 - 0.5
  - 一般問答：0.7 - 0.8
  - 創意建議：0.9 - 1.0

#### 最大 Token 數
- **範圍**：100 - 4000
- **預設值**：2000
- **說明**：控制回答的最大長度
- **建議**：
  - 簡短回答：500 - 1000
  - 一般回答：1500 - 2000
  - 詳細說明：2500 - 4000

#### Top-P 參數
- **範圍**：0 - 1
- **預設值**：0.9
- **說明**：控制回答的多樣性（核採樣）
- **建議**：通常保持 0.9 即可

#### 回答語氣
- **專業正式**：適合政策、規章說明
- **親切友善**：適合一般諮詢
- **簡潔明瞭**：適合快速查詢
- **詳細說明**：適合複雜問題

---

## 2. 📚 知識庫設定

### 功能說明
配置知識庫的檢索行為和管理策略。

### 設定項目

#### 相似度閾值
- **範圍**：0 - 1
- **預設值**：0.75
- **說明**：文件匹配的最低相似度
- **建議**：
  - 精確匹配：0.85 - 0.95
  - 平衡模式：0.70 - 0.80
  - 寬鬆模式：0.50 - 0.65

#### 最大檢索文件數
- **範圍**：1 - 20
- **預設值**：5
- **說明**：每次查詢返回的文件數量
- **建議**：
  - 快速回答：3 - 5 個
  - 詳細分析：8 - 12 個
  - 全面搜尋：15 - 20 個

#### 自動清理天數
- **範圍**：30 - 365
- **預設值**：90 天
- **說明**：自動刪除多久未使用的檔案
- **選項**：
  - 0：停用自動清理
  - 30：每月清理
  - 90：每季清理（推薦）
  - 180：半年清理
  - 365：每年清理

#### 索引更新頻率
- **即時更新**：檔案上傳後立即建立索引（推薦）
- **每小時**：適合大量上傳場景
- **每天**：適合低頻更新
- **每週**：適合靜態知識庫

---

## 3. 🏷️ 分類管理

### 功能說明
管理知識庫的檔案分類，便於組織和檢索。

### 功能特點

#### 檢視分類
- 顯示所有分類
- 顯示每個分類的檔案數量
- 顏色編碼識別

#### 新增分類
1. 點擊「新增分類」按鈕
2. 輸入分類名稱
3. 系統自動分配顏色
4. 確認新增

#### 刪除分類
- 點擊刪除圖示
- 確認刪除操作
- ⚠️ 注意：刪除分類不會刪除檔案，檔案會變為「未分類」

### 預設分類
- 規章制度（藍色）
- 表單下載（綠色）
- 常見問題（黃色）
- 公告（紅色）

---

## 4. 👥 使用者管理

### 功能說明
管理系統管理員帳號和權限。

### 使用者角色

#### 管理員 (Admin)
- 完整系統權限
- 可新增/編輯/刪除使用者
- 可修改系統設定
- 可上傳/刪除檔案

#### 編輯者 (Editor)
- 可上傳檔案
- 可編輯現有檔案
- 可查看統計資料
- 無法修改系統設定

#### 檢視者 (Viewer)
- 只能查看檔案
- 只能查看統計資料
- 無法上傳或刪除
- 無法修改設定

### 使用者狀態
- **啟用**：可正常登入使用
- **停用**：暫時禁止登入

### 功能操作
- 新增使用者
- 編輯使用者資訊
- 變更使用者角色
- 停用/啟用帳號
- 刪除使用者

---

## 5. 🔔 通知設定

### 功能說明
管理系統的通知和警告機制。

### 通知類型

#### Email 通知總開關
- 主控開關
- 關閉後所有 Email 通知停用

#### 上傳成功通知
- 檔案上傳成功時發送
- 包含檔案名稱和上傳時間
- 適合追蹤上傳作業

#### 上傳失敗通知
- 檔案上傳失敗時發送
- 包含錯誤原因
- 即時處理問題

#### 儲存空間警告
- 儲存空間達 80% 時警告
- 儲存空間達 90% 時緊急警告
- 避免儲存空間不足

#### 每週報告
- 每週一早上發送
- 包含：
  - 總檔案數變化
  - 本週上傳/刪除統計
  - API 使用量
  - 儲存空間使用情況

---

## 6. 💾 備份設定

### 功能說明
管理資料備份和災難復原。

### 自動備份

#### 啟用/停用
- 開啟自動備份功能
- 關閉後只能手動備份

#### 備份頻率
- **每天**：2:00 AM 執行（推薦用於重要系統）
- **每週**：週日 2:00 AM 執行（推薦設定）
- **每月**：每月 1 日 2:00 AM 執行

### 手動備份
- 立即建立備份
- 適合重大更新前
- 不受自動備份設定影響

### 備份歷史
- 顯示最近 10 次備份
- 包含：
  - 備份時間
  - 備份大小
  - 備份狀態
- 可從歷史還原

### 還原功能
1. 選擇要還原的備份點
2. 確認還原操作
3. 系統自動還原資料
4. ⚠️ 警告：還原會覆蓋當前資料

---

## 7. 📊 系統資訊

### 功能說明
查看系統運行狀態和統計資料。

### 資訊項目

#### 系統版本
- 當前系統版本號
- 用於技術支援

#### 運行時間
- 系統持續運行時間
- 顯示穩定性

#### 總檔案數
- 知識庫中的檔案總數
- 即時更新

#### 檔案總大小
- 所有檔案的總容量
- 即時計算

#### 本月 API 呼叫
- OpenAI API 呼叫次數
- 用於成本控制

#### 最後備份時間
- 顯示最近一次備份
- 確保資料安全

#### 儲存空間使用率
- 視覺化進度條
- 顯示使用百分比
- 警告提示（80% 黃色、90% 紅色）

---

## 介面特點

### 側邊欄導航
- 圖示 + 文字標籤
- 當前頁面高亮（NCKU 紅色背景）
- 懸停效果
- 清晰的視覺層次

### 設定卡片
- 白色背景
- 圓角設計
- 陰影效果
- 統一的間距

### 互動元素

#### 開關按鈕
- Toggle Switch 設計
- 開啟時為 NCKU 紅色
- 關閉時為灰色
- 流暢的動畫效果

#### 下拉選單
- 清晰的選項
- Focus 狀態紅色邊框
- 適當的內邊距

#### 滑桿控制
- 即時顯示當前值
- 標示最小/最大值
- 平滑的拖曳體驗

### 儲存機制
- 底部固定儲存按鈕
- NCKU 紅色主題
- 懸停陰影效果
- 儲存成功提示

---

## 使用流程

### 初次設定
1. 進入「系統設定」頁面
2. 從「AI 模型設定」開始
3. 依序配置各項設定
4. 每個分頁修改完點擊「儲存設定」

### 日常維護
1. 定期檢查「系統資訊」
2. 查看儲存空間使用率
3. 確認備份是否正常
4. 檢視使用者活動

### 問題排查
1. 檢查「通知設定」是否啟用
2. 查看「備份歷史」是否正常
3. 確認「AI 模型設定」是否適當
4. 檢視「系統資訊」找出異常

---

## 資料儲存

### 本地儲存
- 設定即時儲存到 localStorage
- 頁面重新整理後保持設定

### 伺服器同步
- 點擊「儲存設定」後同步到伺服器
- 多個管理員共享設定

### 備份包含
- 所有檔案
- 系統設定
- 使用者資料
- 分類資訊

---

## 最佳實踐

### AI 模型設定
✅ 根據使用場景調整溫度參數
✅ 定期檢視 API 使用量
✅ 平衡品質和成本

### 知識庫設定
✅ 相似度閾值不宜過高或過低
✅ 檢索文件數適中（3-8 個）
✅ 定期清理無用檔案

### 分類管理
✅ 建立清晰的分類體系
✅ 避免過多重疊的分類
✅ 定期整理分類

### 使用者管理
✅ 最小權限原則
✅ 定期檢視使用者狀態
✅ 移除離職人員帳號

### 通知設定
✅ 啟用重要通知（失敗、警告）
✅ 關閉不必要的通知
✅ 設定適當的通知頻率

### 備份設定
✅ 啟用自動備份
✅ 每週備份已足夠
✅ 重大操作前手動備份
✅ 定期測試還原功能

---

## 安全考量

### 權限控制
- 只有管理員可訪問系統設定
- 編輯者和檢視者無法修改
- 操作日誌記錄

### 資料保護
- 備份加密儲存
- 敏感設定遮罩顯示
- API Key 安全管理

### 審計追蹤
- 記錄所有設定變更
- 記錄操作人員
- 記錄變更時間

---

## 技術細節

### 狀態管理
```javascript
const [settings, setSettings] = useState({
  model: 'gpt-4',
  temperature: 0.7,
  maxTokens: 2000,
  // ... 其他設定
});
```

### 設定變更
```javascript
const handleSettingChange = (key, value) => {
  setSettings(prev => ({
    ...prev,
    [key]: value
  }));
};
```

### 儲存機制
```javascript
const handleSave = () => {
  // API 呼叫儲存設定
  console.log('儲存設定:', settings);
  alert('設定已儲存！');
};
```

---

## 未來擴展

### 計畫功能
- [ ] API Key 管理介面
- [ ] Webhook 設定
- [ ] 主題自訂（顏色、Logo）
- [ ] 多語言切換
- [ ] 進階日誌查看
- [ ] 效能監控儀表板
- [ ] 自訂回答模板
- [ ] 知識庫版本控制

### 優化方向
- [ ] 設定匯入/匯出功能
- [ ] 設定版本歷史
- [ ] 批量使用者管理
- [ ] 角色自訂權限
- [ ] 更細緻的通知篩選

---

## 常見問題

### Q: 修改 AI 模型設定會影響現有問答嗎？
A: 會。設定變更後，新的問答將使用新設定。已產生的回答不會改變。

### Q: 刪除分類會刪除檔案嗎？
A: 不會。刪除分類只會將檔案移到「未分類」，不會刪除檔案本身。

### Q: 備份包含哪些內容？
A: 備份包含所有檔案、系統設定、使用者資料和分類資訊。

### Q: 如何還原到之前的備份？
A: 在「備份設定」頁面的「備份歷史」中，點擊要還原的備份旁的「還原」按鈕。

### Q: 停用使用者後資料會保留嗎？
A: 會。停用只是暫時禁止登入，不會刪除該使用者上傳的檔案。

### Q: 通知會發送到哪裡？
A: 通知會發送到使用者資料中設定的 Email 地址。

---

## 支援資訊

- **版本**: 1.0.0
- **最後更新**: 2025-10-17
- **維護人員**: 開發團隊
- **技術支援**: support@example.com
